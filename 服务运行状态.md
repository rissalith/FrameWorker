# XMGamer 服务运行状态

## ✅ 所有服务已成功启动

生成时间: 2025-11-27 13:18 (UTC+8)

---

## 🐳 Docker 容器服务

| 服务名称 | 状态 | 端口 | 说明 |
|---------|------|------|------|
| **xmgamer-mysql** | ✅ 运行中 (6分钟) | 3306 | MySQL 8.0 数据库 |
| **xmgamer-redis** | ✅ 运行中 (5分钟) | 6379 | Redis 7 缓存服务 |
| **xmgamer-nginx** | ✅ 运行中 (5分钟) | 80 | Nginx 网关 |

### Docker 服务连接信息

**MySQL 数据库**
```
地址: localhost:3306
用户名: root
密码: xmgamer_root_2024
数据库: xmgamer
```

**Redis 缓存**
```
地址: localhost:6379
密码: redis_pass_2024
```

---

## 🐍 Python 应用服务

| 服务名称 | 状态 | 端口 | 访问地址 |
|---------|------|------|---------|
| **Platform API** | ✅ 运行中 | 5000 | http://localhost:5000 |
| **Fortune Game** | ✅ 运行中 | 5001 | http://localhost:5001 |

### Python 服务详情

**Platform API (后端服务)**
- 进程 ID: 41280
- 工作目录: `XMGamer/backend`
- 启动命令: `python start.py`
- 功能: 用户认证、钱包、游戏管理

**Fortune Game (游戏服务)**
- 进程 ID: 42004
- 工作目录: `GameLibrary/games/fortune-game/backend`
- 启动命令: `python app.py`
- 功能: 抖音直播监控、占卜游戏、WebSocket

---

## 📊 端口占用情况

| 端口 | 服务 | 进程 ID | 协议 |
|------|------|---------|------|
| 80 | Nginx | 33480 | HTTP |
| 3306 | MySQL | 33480 | TCP |
| 5000 | Platform API | 41280 | HTTP |
| 5001 | Fortune Game | 42004 | HTTP/WebSocket |
| 6379 | Redis | 33480 | TCP |

---

## 🎯 快速访问

### 前端页面
- **主页**: http://localhost
- **登录**: http://localhost/login.html
- **注册**: http://localhost/register.html
- **游戏市场**: http://localhost/pages/game-market.html

### API 端点
- **Platform API**: http://localhost:5000
- **游戏服务**: http://localhost:5001
- **WebSocket**: ws://localhost:5001

### 测试账号
```
手机号: 13800138000
密码: 123456
```

---

## 🔧 管理命令

### 查看 Docker 服务状态
```bash
docker ps --filter "name=xmgamer-"
```

### 查看服务日志
```bash
# Docker 容器日志
docker logs xmgamer-mysql
docker logs xmgamer-redis
docker logs xmgamer-nginx

# Python 服务日志
# 查看终端输出
```

### 停止服务
```bash
# 停止 Docker 容器
docker stop xmgamer-mysql xmgamer-redis xmgamer-nginx

# 停止 Python 服务
# 在对应终端按 Ctrl+C
```

### 重启服务
```bash
# 重启 Docker 容器
docker restart xmgamer-mysql xmgamer-redis xmgamer-nginx

# 重启 Python 服务
# 1. 在终端按 Ctrl+C 停止
# 2. 重新运行启动命令
```

---

## 📝 数据库状态

### 已初始化的表
- ✅ users (用户表)
- ✅ sessions (会话表)
- ✅ sms_codes (短信验证码)
- ✅ email_codes (邮箱验证码)
- ✅ generation_history (生成历史)
- ✅ user_quotas (用户配额)
- ✅ wallets (钱包)
- ✅ transactions (交易记录)
- ✅ products (产品)
- ✅ licenses (许可证)
- ✅ game_licenses (游戏许可)
- ✅ game_launches (游戏启动记录)

### 数据库文件
```
位置: XMGamer/backend/frameworker.db
类型: SQLite
大小: 根据使用情况动态增长
```

---

## ⚠️ 注意事项

1. **开发环境警告**
   - 当前使用 Flask 开发服务器
   - 不适合生产环境部署
   - 生产环境请使用 Gunicorn 或 uWSGI

2. **数据持久化**
   - Docker 容器数据存储在容器内
   - 删除容器会丢失数据
   - 建议配置 Docker volumes 实现数据持久化

3. **安全建议**
   - 修改默认密码
   - 配置防火墙规则
   - 启用 HTTPS
   - 定期备份数据库

---

## 🚀 下一步

### 开发任务
- [ ] 配置 Nginx 反向代理
- [ ] 设置 HTTPS 证书
- [ ] 配置生产环境数据库
- [ ] 实现数据备份策略
- [ ] 添加监控和日志系统

### 部署任务
- [ ] 修复 GitHub Actions SSH 配置
- [ ] 配置服务器环境
- [ ] 设置域名和 DNS
- [ ] 配置 CDN 加速
- [ ] 实施安全加固

---

## 📚 相关文档

- [本地服务快速启动指南](本地服务快速启动指南.md)
- [Docker 部署文档](DOCKER_DEPLOYMENT.md)
- [GitHub Actions 部署指南](.github/HOW_TO_DEPLOY.md)
- [快速部署指南](.github/QUICK_DEPLOY.md)
- [SSH 故障排除](.github/SSH_TROUBLESHOOTING.md)

---

## 💡 故障排除

### 服务无法启动
1. 检查端口是否被占用: `netstat -ano | findstr "端口号"`
2. 查看 Docker 日志: `docker logs 容器名`
3. 检查 Python 依赖: `pip list`

### 数据库连接失败
1. 确认 MySQL 容器运行: `docker ps | findstr mysql`
2. 测试连接: `mysql -h localhost -u root -p`
3. 检查防火墙设置

### API 请求失败
1. 检查服务是否运行: `netstat -ano | findstr "5000 5001"`
2. 查看终端日志输出
3. 使用 Postman 测试 API 端点

---

**状态**: ✅ 所有服务正常运行  
**最后更新**: 2025-11-27 13:18 (UTC+8)